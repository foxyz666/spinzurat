<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spânzurătoarea Online</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase compat SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

  <!-- IMPORTANT: defer ca să nu mai fie null la getElementById -->
  <script src="script.js" defer></script>
</head>
<body>
  <div class="app">
    <h1>Spânzurătoarea Online</h1>

    <!-- LOBBY / PARTY SCREEN -->
    <section id="party-screen" class="screen active">
      <h2>Party Lobby</h2>

      <div class="name-input">
        <label>
          Numele tău:
          <input id="player-name-input" type="text" placeholder="ex: Alex" />
        </label>
      </div>

      <div class="party-options">
        <label>
          Expiră în:
          <select id="expire-minutes-select">
            <option value="5">5 min</option>
            <option value="10" selected>10 min</option>
            <option value="15">15 min</option>
            <option value="30">30 min</option>
            <option value="60">60 min</option>
          </select>
        </label>

        <label>
          Runde:
          <select id="rounds-select">
            <option value="5">5</option>
            <option value="7" selected>7</option>
            <option value="9">9</option>
            <option value="12">12</option>
          </select>
        </label>
      </div>

      <div class="party-actions">
        <button id="create-party-btn">Create Party</button>
        <button id="join-party-btn" class="secondary">Join Party</button>
      </div>

      <!-- HOST PANEL (shows code + players) -->
      <div id="create-party-panel" class="panel hidden">
        <p>Party creat! Cod:</p>

        <div class="party-code-box">
          <span id="party-code-display"></span>
          <button id="copy-code-btn" class="small-btn secondary">Copy</button>
        </div>

        <p><strong>Status Jucători:</strong></p>
        <div id="party-players-status" class="players-status"></div>

        <button id="start-game-btn" class="hidden" style="margin-top: 12px;">Start Game</button>

        <p class="small-text" id="party-settings-summary"></p>
      </div>

      <!-- JOIN PANEL -->
      <div id="join-party-panel" class="panel hidden">
        <p>Introdu codul:</p>
        <input id="join-code-input" type="text" placeholder="ex: ABCD12" />
        <button id="join-code-confirm-btn">Connect</button>
      </div>

      <p id="party-status" class="message"></p>
    </section>

    <!-- GAME SCREEN -->
    <section id="game-screen" class="screen">
      <div class="topbar">
        <div>Party: <strong id="game-party-code"></strong></div>
        <div>Runda: <strong id="round-number">1</strong></div>
      </div>

      <div class="roles">
        <div>Chooser: <strong id="chooser-name"></strong></div>
        <div>Guesser: <strong id="guesser-name"></strong></div>
      </div>

      <div class="layout">
        <!-- Hangman -->
        <div class="gallows-container">
          <svg id="hangman-svg" viewBox="0 0 200 250">
            <line x1="20" y1="230" x2="180" y2="230" class="gallow" />
            <line x1="50" y1="230" x2="50" y2="30" class="gallow" />
            <line x1="50" y1="30" x2="130" y2="30" class="gallow" />
            <line x1="130" y1="30" x2="130" y2="60" class="gallow" />

            <circle id="part-head" cx="130" cy="80" r="18" class="part hidden" />
            <line id="part-body" x1="130" y1="98" x2="130" y2="150" class="part hidden" />
            <line id="part-arm-left" x1="130" y1="110" x2="105" y2="135" class="part hidden" />
            <line id="part-arm-right" x1="130" y1="110" x2="155" y2="135" class="part hidden" />
            <line id="part-leg-left" x1="130" y1="150" x2="110" y2="190" class="part hidden" />
            <line id="part-leg-right" x1="130" y1="150" x2="150" y2="190" class="part hidden" />
            <g id="part-hat" class="part hidden">
              <rect x="115" y="52" width="30" height="10" rx="2" ry="2" />
              <rect x="120" y="42" width="20" height="12" rx="2" ry="2" />
            </g>
          </svg>

          <div class="status-bar">
            Greșeli: <strong id="wrong-count">0</strong> / <span id="max-wrong">7</span>
          </div>
        </div>

        <!-- Right side -->
        <div class="panel-right">
          <div class="panel">
            <p><strong>Jucători în party:</strong></p>
            <ul id="game-players-list"></ul>
          </div>

          <div id="word-display" class="word-display"></div>

          <!-- Chooser UI -->
          <div id="chooser-box" class="chooser-box hidden">
            <h3>Alege cuvântul (Chooser)</h3>

            <div class="suggestions">
              <div class="suggestion-title">Sugestii ușoare:</div>
              <div id="suggestion-chips" class="chips"></div>
              <button id="random-suggestion-btn" class="secondary">Alege aleator</button>
            </div>

            <label>
              Cuvânt / expresie:
              <input id="secret-word-input" type="password" placeholder="scrie aici..." />
            </label>

            <button id="set-word-btn">Setează cuvântul</button>
            <p class="small-text">După setare, Guesser poate începe să ghicească.</p>
          </div>

          <!-- Guesser UI -->
          <div id="guesser-box" class="guesser-box hidden">
            <h3>Ghicește (Guesser)</h3>

            <div class="guess-input">
              <input id="letter-input" type="text" maxlength="1" autocomplete="off" />
              <button id="guess-btn">Ghicește</button>
            </div>

            <div id="keyboard" class="keyboard"></div>
          </div>

          <p id="game-message" class="message"></p>

          <div class="end-controls">
            <button id="force-next-round-btn" class="secondary hidden">Următoarea rundă</button>
          </div>
        </div>
      </div>
    </section>
  </div>
</body>
</html>